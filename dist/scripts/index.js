"use strict";require(["../scripts/config.js"],function(){require(["common","jquery","swiper","fontscroll","sport2","public","animate"],function(t,h,i){h(".leon_autosug_input").click(function(){h(".leon_welcome").hide()}),h(".leon_autosug_input").blur(function(){h(".leon_welcome").show()});var n=h(".black_nav");h(window).scroll(function(){var t=h(this).scrollTop();624<=t?n.css({position:"fixed",top:"0",left:"0",right:"0",margin:"auto"}):n.css({position:""});var i=Math.floor((t-624)/1700);h(".black_nav ul li").eq(i).find("span").addClass("active"),h(".black_nav ul li").eq(i).siblings().find("span").removeClass("active")}),h(".big_pic").mouseenter(function(){h(this).addClass("curr")}),h(".big_pic").mouseleave(function(){h(this).removeClass("curr")}),h(".big_pic").mouseenter(function(){h(this).find(".fixname").stop().animate({bottom:"-25px"},500),h(this).find(".zytus_size").stop().animate({top:"-72px"},200)}),h(".big_pic").mouseleave(function(){h(".fixname").stop().animate({bottom:"0px"},500),h(".zytus_size").stop().animate({top:"0px"},300)}),h(".my_xiu").mouseenter(function(){h(this).find(".myXiu_menu").css({display:"block"})}),h(".my_xiu").mouseleave(function(){h(this).find(".myXiu_menu").css({display:"none"})});var s=new function(t){this.init=function(){this.currentIndex=0,this.ele=document.querySelector(t),this.imgWrapper=this.ele.children[0],this.navs=Array.from(this.ele.children[1].children),this.addEvents()},this.addEvents=function(){var t=this,n=this;this.ele.addEventListener("mouseenter",function(){clearInterval(t.timer)}),this.ele.addEventListener("mouseleave",function(){t.start()}),this.navs.forEach(function(t,i){t.addEventListener("click",function(){n.currentIndex=i,n.tabImg(),n.tabNav()})})},this.start=function(){var t=this;this.timer=setInterval(function(){4==++t.currentIndex&&(t.currentIndex=0),t.tabImg(),t.tabNav()},3e3)},this.tabImg=function(){animate(this.imgWrapper,{left:1e3*-this.currentIndex})},this.tabNav=function(){this.navs.forEach(function(t){t.className=""}),this.navs[this.currentIndex].className="active"}}(".box");s.init(),s.start(),t.randomColor(),h(function(){h.ajax({url:"http://my.xiu.com/v3/activityExt/goodsList?sns=3I103749%2C3I122148%2C3Q031849%2C3Q025217%2C3Q031384%2C3I119639%2C52047923%2C3O052242%2C3O061280%2C3I122502%2C3I122499%2C3I122517%2C3I083837%2C3I096621%2C3I122532%2C3I122531%2C3I122541%2C3I122539%2C3I122538%2C3I122522%2C3I109107%2C52048626%2C52048619%2C52048692%2C52047158%2C5D015014%2C3Q023377%2C3Q023386%2C3Q023381%2C3Q023379&_=1544413986956",dataType:"jsonp",jsonp:"jsoncallback",success:function(t){var i=t[0],n=[];for(var s in i)n.push(i[s]);for(var e="",a=0;a<8;a++)e+='<div class="zt_bigpic">\n\t\t\t\t\t\t<ul class="ztul">\n\t\t\t\t\t\t\t<li class="big_pic">\n\t\t\t\t\t\t\t<div class="banzi"></div>\n\t\t\t\t\t\t\t\t<ol id="flag_stock_211856_3I103749">\n\t\t\t\t\t\t\t\t\t<li class="zt_tus" goodsid = "'+n[a].goodsId+'">\n\t\t\t\t\t\t\t\t\t\t<a href="goodsinfo.html" class="Img">\n\t\t\t\t\t\t\t\t\t\t\t<img src="'+n[a].goodsImg+'" style="display: inline;" />\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<div class="fixname" style="bottom: 0px;">\n\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t参加满减<span></span>\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div  class="zytus_size" style="top: 0px;">\n\t\t\t\t\t\t\t\t\t\t\t<p class="zytus_size_tit">可选配置：</p>\n\t\t\t\t\t\t\t\t\t\t\t<ul class="zytus_size_lie clearfix J_sizeArea">\n\t\t\t\t\t\t\t\t\t\t\t\t<li class="ssl_item"><span>31mm</span></li>\n\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li class="tit tit1">'+n[a].brandEnName+'</li>\n\t\t\t\t\t\t\t\t\t<li class="tit tit2"><a href="#" > '+n[a].goodsName+'</a></li>\n\t\t\t\t\t\t\t\t\t<li class="price"><ins class="showprice">'+n[a].finalPrice+'</ins>\n\t\t\t\t\t\t\t\t\t\x3c!--<a href="javascript:void(0);" class="addshopcar"></a>--\x3e\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</ol>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>';h(".w22").append(e);var o=n.slice(21,29),l="";for(a=0;a<8;a++)l+='<div class="zt_bigpic">\n\t\t\t\t\t\t<ul class="ztul">\n\t\t\t\t\t\t\t<li class="big_pic">\n\t\t\t\t\t\t\t<div class="banzi"></div>\n\t\t\t\t\t\t\t\t<ol id="flag_stock_211856_3I103749">\n\t\t\t\t\t\t\t\t\t<li class="zt_tus" goodsid = "'+n[a].goodsId+'">\n\t\t\t\t\t\t\t\t\t\t<a href="#">\n\t\t\t\t\t\t\t\t\t\t\t<img src="'+o[a].goodsImg+'" style="display: inline;" />\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<div class="fixname" style="bottom: 0px;">\n\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t参加满减<span></span>\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div  class="zytus_size" style="top: 0px;">\n\t\t\t\t\t\t\t\t\t\t\t<p class="zytus_size_tit">可选配置：</p>\n\t\t\t\t\t\t\t\t\t\t\t<ul class="zytus_size_lie clearfix J_sizeArea">\n\t\t\t\t\t\t\t\t\t\t\t\t<li class="ssl_item"><span>40cm+2cm</span></li>\n\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li class="tit">'+o[a].brandEnName+'</li>\n\t\t\t\t\t\t\t\t\t<li class="tit"><a href="#" > '+o[a].goodsName+'</a></li>\n\t\t\t\t\t\t\t\t\t<li class="price"><ins class="showprice">'+o[a].finalPrice+"</ins></li>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</ol>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>";h(".w23").append(l),h(".big_pic").mouseenter(function(){h(this).addClass("curr")}),h(".big_pic").mouseleave(function(){h(this).removeClass("curr")}),h(".big_pic").mouseenter(function(){h(this).find(".fixname").stop().animate({bottom:"-25px"},500),h(this).find(".zytus_size").stop().animate({top:"-72px"},200)}),h(".big_pic").mouseleave(function(){h(".fixname").stop().animate({bottom:"0px"},500),h(".zytus_size").stop().animate({top:"0px"},300)}),h(".w22").on("click",".Img",function(){removeCookie("productMessage");var t=h(this).parents(".zt_tus").siblings(".tit1").text(),i=h(this).parents(".zt_tus").siblings(".tit2").find("a").text(),n=h(this).find("img").attr("src"),s=[{name:t,price:h(this).parents(".zt_tus").siblings(".price").find(".showprice").text(),info:i,imgsrc:n,goodsid:h(this).parents(".zt_tus").attr("goodsid")}];setCookie("productMessage",JSON.stringify(s))});var c=JSON.parse(getCookie("plist")),r=[];for(var u in c)r.push(c[u]);var d=document.createElement("tbody");for(a=0;a<c.length;a++){var p=document.createElement("tr");d.appendChild(p);for(var m=a;m<a+1;m++){var f=document.createElement("td");f.innerHTML+='<a href="" target="_blank"><img src="'+c[m].imgsrc+'"width = "48" height = "48" /></a>',f.innerHTML+="<p><a rel='nofollow' href='' title = "+c[m].info+" target='_blank'>"+c[m].name+"<br><span>"+c[m].info+"</span></a></p><span>"+c[m].price+" × "+c[a].count+"</span>",f.innerHTML+="<a class= 'delex' href='#' rel='nofollow'>删除</a>",p.appendChild(f)}}h("#mybagw").find("table").append(d),h(".delex").click(function(){var i=h(this).siblings("p").find("a").find("span").html(),t=JSON.parse(getCookie("plist")).filter(function(t){return t.info!=i});setCookie("plist",JSON.stringify(t),7),h(this).parents("td").parents("tr").remove()})}})}),h(".m4").mouseenter(function(){h(this).find(".submenu").show(),h(this).find(".submenu").stop().animate({opacity:"1"},300),h(this).addClass("selected")}),h(".m4").mouseleave(function(){h(this).find(".submenu").hide(),h(this).find(".submenu").stop().animate({opacity:"0"},300),h(this).removeClass("selected")}),h(".m2").mouseenter(function(){h(this).find(".submenu").show(),h(this).find(".submenu").stop().animate({opacity:"1"},300),h(this).addClass("selected")}),h(".m2").mouseleave(function(){h(this).find(".submenu").hide(),h(this).find(".submenu").stop().animate({opacity:"0"},300),h(this).removeClass("selected")}),h(".closed").click(function(){h(this).parent("#backtop").hide()}),h(".backtop").click(function(){h("body").animate({scrollTop:0},500)});var e=document.getElementById("J_searchTerm"),a=document.getElementsByClassName("droplist")[0];e.addEventListener("keyup",function(){h.ajax({url:"http://suggestion.baidu.com/su?wd="+this.value,dataType:"jsonp",jsonp:"cb",success:function(t){a.innerHTML="",t.s.forEach(function(t){var i=document.createElement("li");i.innerHTML=t,a.appendChild(i)})}})}),h(".relax").mouseenter(function(){h(this).find(".myBag_con").show()}),h(".relax").mouseleave(function(){h(this).find(".myBag_con").hide()}),h("#bag").mouseenter(function(){h(this).find("#new_bag").addClass("active")}),h("#bag").mouseleave(function(){h(this).find("#new_bag").removeClass("active")});var o=JSON.parse(getCookie("plist")),l=0;o.forEach(function(t){l+=t.count}),h("#shopNum").html(l);var c=0;o.forEach(function(t){c+=parseInt(t.price*t.count)}),h("#totalprice").html(c),h("#num").html(l),h(".num").html(l),JSON.parse(getCookie("user")).forEach(function(t){console.log(t.onoff),1==t.onoff?h("#logindiv").html('<span style="display:inline-block;color:#d7d7d7;vertical-align:top;">您好，</span><a style="font-weight: bold;white-space:nowrap;display:inline-block;overflow:hidden;text-overflow:ellipsis;" href="http://my.xiu.com/v3/" title="xiu_1013952954403">'+t.name+'</a> <a class="logout" rel="nofollow" href="javascript:$._xiu_login.logout();">[ 退出 ]</a>'):h("#logindiv").html('<a title="登录/注册" href="register.html" url="https://login.xiu.com/?s_id=xiu-login">登录/注册</a>')})})});