"use strict";var _createClass=function(){function n(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}return function(i,t,e){return t&&n(i.prototype,t),e&&n(i,e),i}}();function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}require(["../scripts/config.js"],function(){require(["common","jquery","swiper","fontscroll","sport2","public","animate"],function(i,m,t){m(".leon_autosug_input").click(function(){m(".leon_welcome").hide()}),m(".leon_autosug_input").blur(function(){m(".leon_welcome").show()}),m(".my_xiu").mouseenter(function(){m(this).find(".myXiu_menu").css({display:"block"})}),m(".my_xiu").mouseleave(function(){m(this).find(".myXiu_menu").css({display:"none"})}),m(".m4").mouseenter(function(){m(this).find(".submenu").show(),m(this).find(".submenu").stop().animate({opacity:"1"},300),m(this).addClass("selected")}),m(".m4").mouseleave(function(){m(this).find(".submenu").hide(),m(this).find(".submenu").stop().animate({opacity:"0"},300),m(this).removeClass("selected")}),m(".m2").mouseenter(function(){m(this).find(".submenu").show(),m(this).find(".submenu").stop().animate({opacity:"1"},300),m(this).addClass("selected")}),m(".m2").mouseleave(function(){m(this).find(".submenu").hide(),m(this).find(".submenu").stop().animate({opacity:"0"},300),m(this).removeClass("selected")}),m(".layer13 > a").mouseenter(function(){m(this).find(".tiptools").show()}),m(".layer13 > a").mouseleave(function(){m(this).find(".tiptools").hide()}),m(".fqfh").mouseenter(function(){m(this).find("em").show()}),m(".fqfh").mouseleave(function(){m(this).find("em").hide()}),m(function(){m("#imgPicDiv").mouseenter(function(){m(this).find("#bigPicDiv").show(),m("#showimg").width(m("#bigPicDiv").width()/m("#bigPic").width()*m("#imgPicDiv").width()),m("#showimg").height(m("#bigPicDiv").height()/m("#bigPic").height()*m("#imgPicDiv").height()),m("#imgPicDiv").hover(function(){m("#showimg").show()},function(){m("#showimg").hide()});var n=m("#bigPic").height()/m("#imgPicDiv").height();m("#imgPicDiv").on("mousemove",function(i){var t=i.pageX-m(this).offset().left-m("#showimg").width()/2,e=i.pageY-m(this).offset().top-m("#showimg").height()/2;m("#showimg").css({left:Math.min(Math.max(0,t),m("#imgPicDiv").width()-m("#showimg").width()),top:Math.min(Math.max(0,e),m("#imgPicDiv").height()-m("#showimg").height())}),m("#bigPic").css({left:-m("#showimg").position().left*n,top:-m("#showimg").position().top*n})})}),m("#imgPicDiv").mouseleave(function(){m(this).find("#bigPicDiv").hide()})}),m(".sm_map").find("dd").mouseenter(function(){m(this).addClass("dc").siblings().removeClass("dc")}),m(".backtop").click(function(){m("body").animate({scrollTop:0},500)});var e=m(".cpmx");m(window).scroll(function(){748<=m(this).scrollTop()?e.css({position:"fixed",top:"0",left:"0",right:"0",margin:"auto"}):e.css({position:"","margin-top":"30px"})}),m("#plusAmount").click(function(){var i=parseInt(m("#inputQuantity").val());m("#inputQuantity").val(i+1)}),m("#minusAmount").click(function(){var i=parseInt(m("#inputQuantity").val())-1;i<=1&&(i=1),m("#inputQuantity").val(i)});var n=JSON.parse(getCookie("productMessage"));console.log(n),n.forEach(function(l){m(".style3").html(l.price),m(".cp").find("a").html(l.name),m(".p_title").find("span").find("h1").html(l.info),m("#imgPicDiv").find("img").attr("src",l.imgsrc),m(".dc").find("a").find("img").attr("src",l.imgsrc),m("#bigPic").attr("src",l.imgsrc),m("#positionPrdName").html(l.info),m(".user_buy1").click(function(){var i=l.name,t=l.price,e=l.info,n=l.imgsrc,s=l.goodsid,o=new f(i,t,e,n,s);""==o.get_str().str?o.create_obj().storage():o.get_str().get_json().check().storage();var a={name:i,price:t,info:e,imgsrc:n,goodsid:s,count:1},c=getCookie("plist");if(c){for(var r=JSON.parse(c),h=!1,u=0;u<r.length;u++)if(a.goodsid==r[u].goodsid){h=!0;break}h||r.push(a)}else r=[a];setCookie("plist",JSON.stringify(r),7),console.log(m("#inputQuantity").val())})});var f=function(){function o(i,t,e,n,s){_classCallCheck(this,o),this.str="",this.json=[],this.obj={},this.has=!0,this.name=i,this.price=t,this.info=e,this.img=n,this.id=s}return _createClass(o,[{key:"get_str",value:function(){return this.str=getCookie("plist"),console.log(this.str),this}},{key:"get_json",value:function(){return this.json=JSON.parse(this.str),this}},{key:"storage",value:function(){return setCookie("plist",JSON.stringify(this.json),30),this}},{key:"create_obj",value:function(){return this.obj={name:this.name,price:this.price,info:this.info,imgsrc:this.img,goodsid:this.id,count:1*m("#inputQuantity").val()},this.json.push(this.obj),this}},{key:"check",value:function(){console.log(2);for(var i=0;i<this.json.length;i++)console.log("循环"),this.json[i].goodsid==this.id&&(console.log("一样"),this.json[i].count+=1*m("#inputQuantity").val(),this.has=!1);return this.has&&this.create_obj(),this}}]),o}(),s=(n=JSON.parse(getCookie("plist")),[]);for(var o in n)s.push(n[o]);for(var a=document.createElement("tbody"),c=0;c<n.length;c++){var r=document.createElement("tr");a.appendChild(r);for(var h=c;h<c+1;h++){var u=document.createElement("td");u.innerHTML+='<a href="" target="_blank"><img src="'+n[h].imgsrc+'"width = "48" height = "48" /></a>',u.innerHTML+="<p><a rel='nofollow' href='' title = "+n[h].info+" target='_blank'>"+n[h].name+"<br><span>"+n[h].info+"</span></a></p><span>"+n[h].price+" × "+n[c].count+"</span>",u.innerHTML+="<a class= 'delex' href='#' rel='nofollow'>删除</a>",r.appendChild(u)}}m("#mybagw").find("table").append(a),m(".delex").click(function(){var t=m(this).siblings("p").find("a").find("span").html(),i=JSON.parse(getCookie("plist")).filter(function(i){return i.info!=t});setCookie("plist",JSON.stringify(i),7),m(this).parents("td").parents("tr").remove()});var l=document.getElementById("J_searchTerm"),d=document.getElementsByClassName("droplist")[0];l.addEventListener("keyup",function(){m.ajax({url:"http://suggestion.baidu.com/su?wd="+this.value,dataType:"jsonp",jsonp:"cb",success:function(i){d.innerHTML="",i.s.forEach(function(i){var t=document.createElement("li");t.innerHTML=i,d.appendChild(t)})}})}),m(".relax").mouseenter(function(){m(this).find(".myBag_con").show()}),m(".relax").mouseleave(function(){m(this).find(".myBag_con").hide()}),m("#bag").mouseenter(function(){m(this).find("#new_bag").addClass("active")}),m("#bag").mouseleave(function(){m(this).find("#new_bag").removeClass("active")});n=JSON.parse(getCookie("plist"));var g=0;n.forEach(function(i){g+=i.count,console.log(i)}),m("#shopNum").html(g);var p=0;n.forEach(function(i){p+=parseInt(i.price*i.count)}),m("#totalprice").html(p),m("#num").html(g),m(".num").html(g)})});